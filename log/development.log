Started GET "/api/shipments" for ::1 at 2025-12-14 20:36:52 -0700
  [1m[35m (130.1ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY) /*application='PharmaApi'*/[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL) /*application='PharmaApi'*/[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC /*application='PharmaApi'*/[0m
Processing by Api::ShipmentsController#index as */*
Completed 200 OK in 21ms (Views: 0.2ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)


  [1m[35mSQL (0.7ms)[0m  [1m[35mSET search_path TO public /*application='PharmaApi'*/[0m
  [1m[35m (1812.6ms)[0m  [1m[35mCREATE DATABASE "pharma_api_development" ENCODING = 'unicode' /*application='PharmaApi'*/[0m
  [1m[35m (420.4ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY) /*application='PharmaApi'*/[0m
  [1m[35m (298.9ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL) /*application='PharmaApi'*/[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT pg_try_advisory_lock(5243051708884676505) /*application='PharmaApi'*/[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.9ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC /*application='PharmaApi'*/[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.2ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = 'environment' ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1 /*application='PharmaApi'*/[0m
  [1m[36mActiveRecord::InternalMetadata Create (30.6ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'development', '2025-12-15 05:20:27.799969', '2025-12-15 05:20:27.799977') RETURNING "key" /*application='PharmaApi'*/[0m
Migrating to CreateBatches (20251215052023)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN /*application='PharmaApi'*/[0m
  [1m[35m (283.5ms)[0m  [1m[35mCREATE TABLE "batches" ("id" bigserial primary key, "lot_number" character varying, "expiry" date, "status" integer, "shipment_id" bigint NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, CONSTRAINT "fk_rails_1acccfc229"
FOREIGN KEY ("shipment_id")
  REFERENCES "shipments" ("id")
) /*application='PharmaApi'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK /*application='PharmaApi'*/[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT pg_advisory_unlock(5243051708884676505) /*application='PharmaApi'*/[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_try_advisory_lock(5243051708884676505) /*application='PharmaApi'*/[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC /*application='PharmaApi'*/[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.8ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = 'environment' ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1 /*application='PharmaApi'*/[0m
Migrating to CreateBatches (20251215052023)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='PharmaApi'*/[0m
  [1m[35m (291.7ms)[0m  [1m[35mCREATE TABLE "batches" ("id" bigserial primary key, "lot_number" character varying, "expiry" date, "status" integer, "shipment_id" bigint NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, CONSTRAINT "fk_rails_1acccfc229"
FOREIGN KEY ("shipment_id")
  REFERENCES "shipments" ("id")
) /*application='PharmaApi'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK /*application='PharmaApi'*/[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT pg_advisory_unlock(5243051708884676505) /*application='PharmaApi'*/[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_try_advisory_lock(5243051708884676505) /*application='PharmaApi'*/[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC /*application='PharmaApi'*/[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.8ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = 'environment' ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1 /*application='PharmaApi'*/[0m
Migrating to CreateBatches (20251215052023)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN /*application='PharmaApi'*/[0m
  [1m[35m (478.8ms)[0m  [1m[35mCREATE TABLE "batches" ("id" bigserial primary key, "lot_number" character varying, "expiry" date, "status" integer, "shipment_id" bigint NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, CONSTRAINT "fk_rails_1acccfc229"
FOREIGN KEY ("shipment_id")
  REFERENCES "shipments" ("id")
) /*application='PharmaApi'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK /*application='PharmaApi'*/[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_advisory_unlock(5243051708884676505) /*application='PharmaApi'*/[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_try_advisory_lock(5243051708884676505) /*application='PharmaApi'*/[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC /*application='PharmaApi'*/[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.6ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = 'environment' ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1 /*application='PharmaApi'*/[0m
Migrating to CreateBatches (20251215052023)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN /*application='PharmaApi'*/[0m
  [1m[35m (763.4ms)[0m  [1m[35mCREATE TABLE "batches" ("id" bigserial primary key, "lot_number" character varying, "expiry" date, "status" integer, "shipment_id" bigint NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, CONSTRAINT "fk_rails_1acccfc229"
FOREIGN KEY ("shipment_id")
  REFERENCES "shipments" ("id")
) /*application='PharmaApi'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK /*application='PharmaApi'*/[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT pg_advisory_unlock(5243051708884676505) /*application='PharmaApi'*/[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_try_advisory_lock(5243051708884676505) /*application='PharmaApi'*/[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC /*application='PharmaApi'*/[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.7ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = 'environment' ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1 /*application='PharmaApi'*/[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_advisory_unlock(5243051708884676505) /*application='PharmaApi'*/[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC /*application='PharmaApi'*/[0m
  [1m[35mSQL (0.1ms)[0m  [1m[35mSET search_path TO public /*application='PharmaApi'*/[0m
  [1m[35mSQL (0.1ms)[0m  [1m[35mSET search_path TO "$user", public /*application='PharmaApi'*/[0m
  [1m[35mSQL (0.1ms)[0m  [1m[35mSET search_path TO public /*application='PharmaApi'*/[0m
  [1m[35mSQL (0.1ms)[0m  [1m[35mSET search_path TO "$user", public /*application='PharmaApi'*/[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_try_advisory_lock(5243051708884676505) /*application='PharmaApi'*/[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.9ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC /*application='PharmaApi'*/[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.9ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = 'environment' ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1 /*application='PharmaApi'*/[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_advisory_unlock(5243051708884676505) /*application='PharmaApi'*/[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC /*application='PharmaApi'*/[0m
  [1m[35mSQL (0.1ms)[0m  [1m[35mSET search_path TO public /*application='PharmaApi'*/[0m
  [1m[35mSQL (0.2ms)[0m  [1m[35mSET search_path TO "$user", public /*application='PharmaApi'*/[0m
  [1m[35mSQL (0.1ms)[0m  [1m[35mSET search_path TO public /*application='PharmaApi'*/[0m
  [1m[35mSQL (0.2ms)[0m  [1m[35mSET search_path TO "$user", public /*application='PharmaApi'*/[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_try_advisory_lock(5243051708884676505) /*application='PharmaApi'*/[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC /*application='PharmaApi'*/[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.7ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = 'environment' ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1 /*application='PharmaApi'*/[0m
Migrating to CreateBatches (20251215053403)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='PharmaApi'*/[0m
  [1m[35m (729.5ms)[0m  [1m[35mCREATE TABLE "batches" ("id" bigserial primary key, "lot_number" character varying, "expiry" date, "status" integer, "shipment_id" bigint NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, CONSTRAINT "fk_rails_1acccfc229"
FOREIGN KEY ("shipment_id")
  REFERENCES "shipments" ("id")
) /*application='PharmaApi'*/[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK /*application='PharmaApi'*/[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT pg_advisory_unlock(5243051708884676505) /*application='PharmaApi'*/[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC /*application='PharmaApi'*/[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_try_advisory_lock(5243051708884676505) /*application='PharmaApi'*/[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC /*application='PharmaApi'*/[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.7ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = 'environment' ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1 /*application='PharmaApi'*/[0m
Migrating to CreateShipments (20251215053616)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN /*application='PharmaApi'*/[0m
  [1m[35m (495.7ms)[0m  [1m[35mCREATE TABLE "shipments" ("id" bigserial primary key, "tracking_number" character varying, "status" character varying, "driver_name" character varying, "current_temp" float, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL) /*application='PharmaApi'*/[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.6ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ('20251215053616') RETURNING "version" /*application='PharmaApi'*/[0m
  [1m[36mTRANSACTION (30.4ms)[0m  [1m[35mCOMMIT /*application='PharmaApi'*/[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT pg_advisory_unlock(5243051708884676505) /*application='PharmaApi'*/[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC /*application='PharmaApi'*/[0m
  [1m[35mSQL (0.1ms)[0m  [1m[35mSET search_path TO public /*application='PharmaApi'*/[0m
  [1m[35mSQL (0.3ms)[0m  [1m[35mSET search_path TO "$user", public /*application='PharmaApi'*/[0m
  [1m[35mSQL (0.1ms)[0m  [1m[35mSET search_path TO public /*application='PharmaApi'*/[0m
  [1m[35mSQL (0.1ms)[0m  [1m[35mSET search_path TO "$user", public /*application='PharmaApi'*/[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_try_advisory_lock(5243051708884676505) /*application='PharmaApi'*/[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.9ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC /*application='PharmaApi'*/[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.7ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = 'environment' ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1 /*application='PharmaApi'*/[0m
Migrating to CreateBatches (20251215053620)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN /*application='PharmaApi'*/[0m
  [1m[35m (323.0ms)[0m  [1m[35mCREATE TABLE "batches" ("id" bigserial primary key, "lot_number" character varying, "expiry" date, "status" integer, "shipment_id" bigint NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, CONSTRAINT "fk_rails_1acccfc229"
FOREIGN KEY ("shipment_id")
  REFERENCES "shipments" ("id")
) /*application='PharmaApi'*/[0m
  [1m[35m (135.5ms)[0m  [1m[35mCREATE INDEX "index_batches_on_shipment_id" ON "batches" ("shipment_id") /*application='PharmaApi'*/[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.5ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ('20251215053620') RETURNING "version" /*application='PharmaApi'*/[0m
  [1m[36mTRANSACTION (31.1ms)[0m  [1m[35mCOMMIT /*application='PharmaApi'*/[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT pg_advisory_unlock(5243051708884676505) /*application='PharmaApi'*/[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC /*application='PharmaApi'*/[0m
  [1m[35mSQL (0.1ms)[0m  [1m[35mSET search_path TO public /*application='PharmaApi'*/[0m
  [1m[35mSQL (0.1ms)[0m  [1m[35mSET search_path TO "$user", public /*application='PharmaApi'*/[0m
  [1m[35mSQL (0.1ms)[0m  [1m[35mSET search_path TO public /*application='PharmaApi'*/[0m
  [1m[35mSQL (0.1ms)[0m  [1m[35mSET search_path TO "$user", public /*application='PharmaApi'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN /*application='PharmaApi'*/[0m
  [1m[36mShipment Create (1.6ms)[0m  [1m[32mINSERT INTO "shipments" ("tracking_number", "status", "driver_name", "current_temp", "created_at", "updated_at") VALUES ('SHIP001', NULL, NULL, NULL, '2025-12-15 05:54:52.682253', '2025-12-15 05:54:52.682253') RETURNING "id" /*application='PharmaApi'*/[0m
  [1m[36mTRANSACTION (56.2ms)[0m  [1m[35mCOMMIT /*application='PharmaApi'*/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN /*application='PharmaApi'*/[0m
  [1m[36mShipment Create (1.4ms)[0m  [1m[32mINSERT INTO "shipments" ("tracking_number", "status", "driver_name", "current_temp", "created_at", "updated_at") VALUES ('SHIP001', 'in_transit', 'John Doe', 2.5, '2025-12-15 05:59:22.871849', '2025-12-15 05:59:22.871849') RETURNING "id" /*application='PharmaApi'*/[0m
  [1m[36mTRANSACTION (42.7ms)[0m  [1m[35mCOMMIT /*application='PharmaApi'*/[0m
  [1m[36mShipment Load (0.9ms)[0m  [1m[34mSELECT "shipments".* FROM "shipments" ORDER BY "shipments"."id" ASC LIMIT 1 /*application='PharmaApi'*/[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN /*application='PharmaApi'*/[0m
  [1m[36mBatch Exists? (2.0ms)[0m  [1m[34mSELECT 1 AS one FROM "batches" WHERE "batches"."lot_number" = 'LOT123' LIMIT 1 /*application='PharmaApi'*/[0m
  [1m[36mBatch Create (1.0ms)[0m  [1m[32mINSERT INTO "batches" ("lot_number", "expiry", "status", "shipment_id", "created_at", "updated_at") VALUES ('LOT123', '2026-01-14', 0, 1, '2025-12-15 05:59:22.968044', '2025-12-15 05:59:22.968044') RETURNING "id" /*application='PharmaApi'*/[0m
  [1m[36mTRANSACTION (54.1ms)[0m  [1m[35mCOMMIT /*application='PharmaApi'*/[0m
